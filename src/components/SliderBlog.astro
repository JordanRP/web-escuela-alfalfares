---
interface Props {
  images: string[];
}

const { images } = Astro.props;
---

<div class="relative w-full max-w-4xl mx-auto">
  <!-- Slider container -->
  <div class="overflow-hidden rounded-2xl shadow-lg">
    <div
      id="slider-track"
      class="flex transition-transform duration-500 ease-in-out"
      style="transform: translateX(0%)"
    >
      {images.map((src, index) => (
        <div class="min-w-full h-150 flex justify-center items-center bg-gray-100" key={index}>
          <img src={src} alt={`Slide ${index + 1}`} class="w-full h-full object-cover" />
        </div>
      ))}
    </div>
  </div>

  <!-- Controls -->
  <button
    id="prev"
    class="absolute top-1/2 -left-5 -translate-y-1/2 bg-white/80 p-2 rounded-full shadow hover:bg-white"
  >
    ‹
  </button>
  <button
    id="next"
    class="absolute top-1/2 -right-5 -translate-y-1/2 bg-white/80 p-2 rounded-full shadow hover:bg-white"
  >
    ›
  </button>

  <!-- Dots -->
  <div class="flex justify-center mt-3 space-x-2" id="slider-dots">
    {images.map((_, index) => (
      <button
        class="w-3 h-3 rounded-full bg-gray-400 hover:bg-gray-600"
        data-index={index}
      ></button>
    ))}
  </div>
</div>

<script>
  const track = document.getElementById("slider-track");
  const slides = track.children.length;
  let index = 0;

  const updateSlider = () => {
    track.style.transform = `translateX(-${index * 100}%)`;
    document.querySelectorAll("#slider-dots button").forEach((dot, i) => {
      dot.classList.toggle("bg-gray-800", i === index);
      dot.classList.toggle("bg-gray-400", i !== index);
    });
  };

  document.getElementById("prev").addEventListener("click", () => {
    index = (index - 1 + slides) % slides;
    updateSlider();
  });

  document.getElementById("next").addEventListener("click", () => {
    index = (index + 1) % slides;
    updateSlider();
  });

  document.querySelectorAll("#slider-dots button").forEach((dot) => {
    dot.addEventListener("click", () => {
      index = parseInt(dot.dataset.index);
      updateSlider();
    });
  });

  updateSlider();
</script>
